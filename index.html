<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Golden Brown</title>
<style>
  html,body{
    height:100%; margin:0; padding:0; background:#000;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }

  .full-bleed{
    min-height:100vh; width:100vw; overflow:hidden;
    display:flex; align-items:center; justify-content:center;
    background-color:black; background-size:cover;
    background-position:center; background-repeat:no-repeat;
    position:relative;
    transition: background-color 1.5s ease;
  }

  /* cinematic radial overlay (edges -> center) */
  .full-bleed::after {
    content: '';
    position: absolute;
    top:0; left:0; right:0; bottom:0;
    background: radial-gradient(circle, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%);
    opacity: 0;
    pointer-events: none;
    transition: opacity 6s ease;
    z-index: 3;
  }
  .full-bleed.fade-to-center::after { opacity: 1; }

  .title{
    font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
    font-weight:800;
    font-size:clamp(28px,8vw,120px);
    line-height:1;
    cursor:pointer; user-select:none;
    background:radial-gradient(circle at center,#ffd27f 0%,#b87333 50%,#5a2b12 100%);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    transition:transform 180ms ease;
    white-space:nowrap; z-index:5;
  }
  .title:hover{ transform:scale(1.06); }
  .title.clicked { pointer-events: none; } /* prevents further clicks/hover effects after first click */

  /* Re-usable lyrics block styling */
  .lyrics {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    bottom: -100%; /* start off-screen */
    max-width: 88vw;
    width: min(1000px, 88vw);
    font-size: clamp(16px, 3.4vw, 28px);
    line-height: 1.45;
    color: #fff9e6;
    white-space: pre-wrap;
    text-align: center;
    text-shadow:
      0 0 10px #ffffff,
      0 0 20px #ffd27f,
      0 0 35px #ffffff,
      0 0 50px #ffd27f;
    z-index: 4;
  }

  .ily{
    position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
    font-size:clamp(18px,4vw,40px);
    color:#ffd27f; /* gold */
    display:none; z-index:6;
    text-shadow:
      0 0 10px #ffffff,
      0 0 20px #ffd27f,
      0 0 35px #ffffff,
      0 0 50px #ffd27f;
    animation: glowPulse 2.4s ease-in-out infinite;
  }

  @keyframes glowPulse{
    0%{ text-shadow:0 0 6px #fff,0 0 12px #ffd27f,0 0 18px #fff; transform:translate(-50%,-50%) scale(1);} 
    50%{ text-shadow:0 0 20px #fff,0 0 35px #ffd27f,0 0 50px #fff; transform:translate(-50%,-50%) scale(1.12);} 
    100%{ text-shadow:0 0 6px #fff,0 0 12px #ffd27f,0 0 18px #fff; transform:translate(-50%,-50%) scale(1);} 
  }
</style>
</head>
<body>
  <div id="stage" class="full-bleed">
    <div id="title" class="title">Golden Brown</div>
    <div id="ily" class="ily">&lt;3</div>
  </div>

  <!-- small hover click sound, guitar, and the main song -->
  <audio id="pop" src="audios/Water Drop.wav" preload="auto"></audio>
  <audio id="guitar" src="audios/C Guitar.wav" preload="auto"></audio>
  <audio id="song" src="audios/Golden_Brown.mp3" preload="auto"></audio>

<script>
/* ---------- DOM references ---------- */
const stage = document.getElementById('stage');
const title = document.getElementById('title');
const ily = document.getElementById('ily');
const pop = document.getElementById('pop');
const guitar = document.getElementById('guitar');
const song = document.getElementById('song');

/* ---------- state ---------- */
let clicked = false;
let activeParagraphs = [];

/* ---------- audio setup ---------- */
pop.volume = 1.0;
pop.playbackRate = 1.0;
pop.load();

/* Unlock small hover sound on the first user interaction */
window.addEventListener('click', () => {
  pop.play().then(()=>{ pop.pause(); pop.currentTime = 0; }).catch(()=>{});
}, { once: true });

/* Hover sound BEFORE first click only */
title.addEventListener('pointerenter', () => {
  if (clicked) return;
  try { pop.currentTime = 0; pop.play().catch(()=>{}); } catch(e){}
});

/* ---------- visual/audio resources ---------- */
const BG_DIYA = 'images/Diya.jpg';

/* ---------- paragraph labels ---------- */
const LYRIC_PARAGRAPHS = [
  "Golden brown, texture like sun\nLays me down, with my mind she runs\nThroughout the night\nNo need to fight\nNever a frown with golden brown",
  "Every time just like the last\nOn her ship tied to the mast\nTo distant lands\nTakes both my hands\nNever a frown with golden brown",
  "Golden brown, finer temptress\nThrough the ages sheâ€™s heading west\nFrom far away\nStays for a day\nNever a frown with golden brown",
  "Never a frown (never a frown)\n(Never a frown) with golden brown (with golden brown)\n(With golden brown) never a frown (never a frown)\n(Never a frown) with golden brown (with golden brown)\n(With golden brown) never a frown (never a frown)\n(Never a frown) with golden brown (with golden brown)\n(With golden brown) never a frown (never a frown)\n(Never a frown) with golden brown (with golden brown)"
];

/* ---------- TIMINGS (seconds after the click) ---------- */
/*:p1 at 6.4s,
   p2 at 6.4s + 20.2s = 26.6s,
   p3 at 26.6s + 35s = 61.6s,
   p4 at 61.6s + 97s = 158.6s
*/
const PAR_TIMES_SEC = [6.4, 26.6, 61.6, 158.6];

/* ---------- animation speeds ---------- */
const SCROLL_SPEED = 0.4; // incremental pixels per frame

/* ---------- Title initialization ---------- */
title._y = 0;

/* ---------- Click handler (single click only) ---------- */
title.addEventListener('click', () => {
  if (clicked) return;
  clicked = true;
  title.classList.add('clicked');
  title.style.transform = 'none';
  stage.style.backgroundImage = `url(${BG_DIYA})`;

  try {
    guitar.currentTime = 0;
    guitar.play().catch(()=>{});
  } catch(e){}

  setTimeout(() => {
    try { song.currentTime = 0; song.play().catch(()=>{}); } catch(e){}
  }, 500); // small delay before main song

  // start title upward animation
  requestAnimationFrame(stepTitle);

  // schedule paragraphs exactly at PAR_TIMES_SEC
  PAR_TIMES_SEC.forEach((tSec, idx) => {
    setTimeout(() => {
      // create and animate paragraph idx
      const isLast = (idx === LYRIC_PARAGRAPHS.length - 1);
      createAndScrollParagraph(LYRIC_PARAGRAPHS[idx], isLast);
    }, Math.max(0, Math.round(tSec * 1000)));
  });
});

/* ---------- Title upward animation (independent) ---------- */
function stepTitle(){
  // keep moving until out of view
  title._y += SCROLL_SPEED;
  title.style.transform = `translateY(-${title._y}px)`;

  const rect = title.getBoundingClientRect();
  if (rect.bottom < 0) {
    title.style.display = 'none';
    return;
  }
  requestAnimationFrame(stepTitle);
}

/* ---------- Create paragraph element and animate it upward ---------- */
function createAndScrollParagraph(text, isLast){
  const para = document.createElement('div');
  para.className = 'lyrics';
  para.textContent = text;
  stage.appendChild(para);
  activeParagraphs.push(para);

  // set initial scroll vars after element is in DOM
  para._ty = 0;
  para._startBottom = -para.offsetHeight;
  para.style.bottom = para._startBottom + "px"; 


  function stepPara(){
    para._ty += SCROLL_SPEED;
    para.style.bottom = (para._startBottom + para._ty) + 'px';

    const rect = para.getBoundingClientRect();
    if (rect.bottom < 0) {
      // finished scrolling off top
      para.remove();
      const idx = activeParagraphs.indexOf(para);
      if (idx !== -1) activeParagraphs.splice(idx, 1);

      if (isLast) {
        showHeartAndFade();
      }
      return;
    }
    requestAnimationFrame(stepPara);
  }

  requestAnimationFrame(stepPara);
}

/* ---------- Heart + cinematic radial fade back to black ---------- */
function showHeartAndFade(){
  // Remove background image and fade to black
  stage.style.backgroundImage = 'none';
  stage.style.backgroundColor = '#000';
  stage.classList.add('fade-to-center'); // triggers radial overlay opacity

  // show heart
  ily.style.display = 'block';
  ily.style.opacity = 0;
  ily.style.transform = 'translate(-50%, -50%) scale(0.6)';
  ily.style.transition = 'opacity 1.2s ease, transform 1.2s ease';

  requestAnimationFrame(() => {
    ily.style.opacity = 1;
    ily.style.transform = 'translate(-50%, -50%) scale(1.4)';
  });
}

/* ---------- safety: stop pointer/hover sounds after unload ---------- */
window.addEventListener('pagehide', () => {
  try { pop.pause(); } catch(e){}
  try { guitar.pause(); } catch(e){}
  try { song.pause(); } catch(e){}
});
</script>
</body>
</html>
